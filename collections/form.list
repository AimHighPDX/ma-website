<form id="{collection.urlId}" pristine novalidate>
   <div class="form-error">Whoops, the whole form is wrong!</div>
   {.repeated section items}
      {.var @id id}
      {.var @empty nothing}
      {.equal? customContent.customType "form-hidden"}
         <input id="{@id}-input" data-category="{categories}" type="hidden" name="{customContent.name}">
      {.end}
      {.equal? customContent.customType "form-checkbox"}
         <fieldset class="fieldset-checkbox" aria-describedby="checkbox-fieldset-error" data-required="true" data-min="1" data-max="2">
            <legend>
               {customContent.description}
               <span class="field-required" aria-hidden="true">*</span>
               {.equal? customContent.required true}
                  <span class="visually-hidden">required</span>
               {.end}
            </legend>
            <!--
            <div class="form-field">
               <label class="field-label" for="checkbox-field-input-1">
                  <input name="Checkbox Fieldset" id="checkbox-field-input-1" class="field-input" type="checkbox" value="Checkbox 1">
                  Checkbox 1
               </label>
            </div>
            <div class="form-field">
               <label class="field-label" for="checkbox-field-input-2">
                  <input name="Checkbox Fieldset" id="checkbox-field-input-2" class="field-input" type="checkbox" value="Checkbox 2">
                  Checkbox 2
               </label>
            </div>
            <div class="form-field">
               <label class="field-label" for="checkbox-field-input-3">
                  <input name="Checkbox Fieldset" id="checkbox-field-input-3" class="field-input" type="checkbox" value="Checkbox 3">
                  Checkbox 3
               </label>
            </div>-->
            <p id="checkbox-fieldset-error" class="fieldset-error"></p>
         </fieldset>
      {.or}
         <div class="form-field" data-category="{categories}">
            <label class="field-label" for="{@id}-input">
               {title}
               <span class="field-required" aria-hidden="true">*</span>
            </label>

            {.var @body body}
            {.section customContent}
               {.equal? description @empty}{.or}
               <p id="{@id}-description" class="small-text">{description}</p>
               {.end}
               {.equal? customType "form-text"}
                  <input id="{@id}-input" class="field-input" type="text" name="{name}" 
                     {.equal? pattern @empty}{.or}
                        pattern="{pattern}"
                        title="{title}"
                     {.end}
                     {.equal? autocomplete @empty}{.or}
                        autocomplete="{autocomplete}"
                     {.end}
                     {.equal? required @empty}{.or}
                        required
                     {.end} 
                     aria-describedBy="{@id}-error {.equal? description @empty}{.or}{@id}-description{.end}"
                     pristine>
               {.end}
               {.equal? customType "form-email"}
                  <input id="{@id}-input" class="field-input" type="email" name="{name}" 
                     {.equal? pattern @empty}{.or}
                        pattern="{pattern}"
                        title="{title}"
                     {.end}
                     {.equal? autocomplete @empty}{.or}
                        autocomplete="{autocomplete}"
                     {.end}
                     {.equal? required @empty}{.or}
                        required
                     {.end} 
                     aria-describedBy="{@id}-error {.equal? description @empty}{.or}{@id}-description{.end}"
                     pristine>
               {.end}
               {.equal? customType "form-select"}
                  <select id="{@id}-input" class="field-input" name="{name}"
                     {.equal? autocomplete @empty}{.or}
                        autocomplete="{autocomplete}"
                     {.end}
                     {.equal? required @empty}{.or}
                        required
                     {.end} 
                     aria-describedBy="{@id}-error {.equal? description @empty}{.or}{@id}-description{.end}"
                     pristine>
                     <option value="" disabled selected>Choose one...</option>
                     {@body}
                  </select>
               {.end}
               {.equal? customType "form-textarea"}
                  <textarea id="{@id}-input" class="field-input" name="{name}" rows="5"
                  {.equal? autocomplete @empty}{.or}
                     autocomplete="{autocomplete}"
                  {.end}
                  {.equal? required @empty}{.or}
                     required
                  {.end} 
                  aria-describedBy="{@id}-error {.equal? description @empty}{.or}{@id}-description{.end}"
                  pristine></textarea>
               {.end}
            {.end}
            <p id="{@id}-error" class="field-error"></p>
         </div>
      {.end}
   {.end}

   <div>
      <button id="{collection.id}-submit" type="submit" aria-describedby="submit-status">Submit</button>
      <p id="{collection.id}-submit-status"></p>
   </div>
</form>
