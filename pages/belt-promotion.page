<div>
   <squarespace:block-field id="belt-promotion-intro" label="Belt Promotion Intro" columns="1"/>
</div>

<section class="belt-promotion-programs">
   <section>
      <h3>Little Warriors</h3>
      <h4>Testing Dates</h4>
      <squarespace:query collection="belt-promotion-schedule" category="Little Warriors">
         <ul data-sort="chronological">
            {.repeated section items}
               <li data-time="{startDate}">{startDate|date %m/%d}</li>
            {.end}
         </ul>
      </squarespace:query>
      <button class="open-dialog" onclick="openDialog('belt-promotion-form', this);updateBeltPromotion('Little Warriors');">Application</button>
   </section>

   <section>
      <h3>Warriors Junior</h3>
      <h4>Testing Dates</h4>
      <squarespace:query collection="belt-promotion-schedule" category="Warriors Junior">
         <ul data-sort="chronological">
            {.repeated section items}
               <li data-time="{startDate}">{startDate|date %m/%d}</li>
            {.end}
         </ul>
      </squarespace:query>
      <button onclick="openDialog('belt-promotion-form', this);updateBeltPromotion('Warriors Junior');">Application</button>
   </section>

   <section>
      <h3>MMA</h3>
      <h4>Testing Dates</h4>
      <squarespace:query collection="belt-promotion-schedule" category="MMA">
         <ul data-sort="chronological">
            {.repeated section items}
               <li data-time="{startDate}">{startDate|date %m/%d}</li>
            {.end}
         </ul>
      </squarespace:query>
      <button onclick="openDialog('belt-promotion-form', this);updateBeltPromotion('MMA');">Application</button>
   </section>

   <section>
      <h3>Taekwondo</h3>
      <h4>Testing Dates</h4>
      <squarespace:query collection="belt-promotion-schedule" category="Taekwondo">
         <ul data-sort="chronological">
            {.repeated section items}
               <li data-time="{startDate}">{startDate|date %m/%d}</li>
            {.end}
         </ul>
      </squarespace:query>
      <button onclick="openDialog('belt-promotion-form', this);updateBeltPromotion('Taekwondo');">Application</button>
   </section>

   <section>
      <h3>Tang Soo Do</h3>
      <h4>Testing Dates</h4>
      <squarespace:query collection="belt-promotion-schedule" category="Tang Soo Do">
         <ul data-sort="chronological">
            {.repeated section items}
               <li data-time="{startDate}">{startDate|date %m/%d}</li>
            {.end}
         </ul>
      </squarespace:query>
      <button onclick="openDialog('belt-promotion-form', this);updateBeltPromotion('Tang Soo Do');">Application</button>
   </section>
</section>

<dialog id="belt-promotion-form" class="modal-dialog">
   <div>
      <header autofocus>
         <h2 class="heading-level3">Belt Promotion Application</h2>
         <button class="icon-button" onclick="dispatchCloseEvent(this);">
            <div class="icon" aria-hidden="true">&#x2715;</div>
            <span class="text visually-hidden">Close dialog</span>
         </button>
      </header>
      <div class="dialog-body">
         <squarespace:query collection="belt-promotion-application">
            {@|apply form.list}
         </squarespace:query>
         <script>beltPromotionInit();</script>
      </div>
   </div>
</dialog>